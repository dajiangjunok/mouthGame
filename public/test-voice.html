<!DOCTYPE html>
<html>
<head>
    <title>å£°éŸ³æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f0f9ff;
        }
        .test-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 600px;
            margin: 0 auto;
        }
        .test-item {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            transition: background-color 0.2s;
        }
        .play-btn {
            background-color: #10b981;
            color: white;
        }
        .play-btn:hover {
            background-color: #059669;
        }
        .stop-btn {
            background-color: #ef4444;
            color: white;
        }
        .stop-btn:hover {
            background-color: #dc2626;
        }
        .status {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            font-weight: bold;
        }
        .success {
            background-color: #d1fae5;
            color: #065f46;
        }
        .error {
            background-color: #fee2e2;
            color: #991b1b;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸµ å¼ å˜´å£°éŸ³æµ‹è¯•</h1>
        
        <div class="test-item">
            <h3>éŸ³é¢‘æ–‡ä»¶æ£€æµ‹</h3>
            <p>æ£€æµ‹ voice1.MP3 æ–‡ä»¶æ˜¯å¦å­˜åœ¨å¹¶å¯æ’­æ”¾</p>
            <div id="file-status" class="status">æ£€æµ‹ä¸­...</div>
        </div>

        <div class="test-item">
            <h3>æ‰‹åŠ¨æ’­æ”¾æµ‹è¯•</h3>
            <p>æ‰‹åŠ¨æ§åˆ¶å£°éŸ³æ’­æ”¾å’Œåœæ­¢</p>
            <button class="play-btn" onclick="playVoice()">ğŸµ æ’­æ”¾å¼ å˜´å£°éŸ³</button>
            <button class="stop-btn" onclick="stopVoice()">ğŸ”‡ åœæ­¢å£°éŸ³</button>
            <div id="manual-status" class="status">ç­‰å¾…æ“ä½œ...</div>
        </div>

        <div class="test-item">
            <h3>å¾ªç¯æ’­æ”¾æµ‹è¯•</h3>
            <p>æµ‹è¯•å£°éŸ³çš„å¾ªç¯æ’­æ”¾åŠŸèƒ½</p>
            <button class="play-btn" onclick="playLoop()">ğŸ”„ å¾ªç¯æ’­æ”¾</button>
            <button class="stop-btn" onclick="stopLoop()">â¹ï¸ åœæ­¢å¾ªç¯</button>
            <div id="loop-status" class="status">ç­‰å¾…æ“ä½œ...</div>
        </div>
    </div>

    <script>
        let audio = null;
        let loopAudio = null;

        // æ£€æµ‹éŸ³é¢‘æ–‡ä»¶
        function checkAudioFile() {
            const testAudio = new Audio('/sounds/voice1.MP3');
            const statusEl = document.getElementById('file-status');
            
            testAudio.addEventListener('canplay', () => {
                statusEl.textContent = 'âœ… éŸ³é¢‘æ–‡ä»¶åŠ è½½æˆåŠŸï¼Œå¯ä»¥æ’­æ”¾';
                statusEl.className = 'status success';
            });
            
            testAudio.addEventListener('error', () => {
                statusEl.textContent = 'âŒ éŸ³é¢‘æ–‡ä»¶åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶è·¯å¾„';
                statusEl.className = 'status error';
            });
            
            testAudio.load();
        }

        // æ’­æ”¾å£°éŸ³
        function playVoice() {
            if (!audio) {
                audio = new Audio('/sounds/voice1.MP3');
                audio.volume = 0.6;
            }
            
            const statusEl = document.getElementById('manual-status');
            
            audio.currentTime = 0;
            audio.play().then(() => {
                statusEl.textContent = 'ğŸµ æ­£åœ¨æ’­æ”¾å¼ å˜´å£°éŸ³';
                statusEl.className = 'status success';
            }).catch(error => {
                statusEl.textContent = 'âŒ æ’­æ”¾å¤±è´¥: ' + error.message;
                statusEl.className = 'status error';
            });
        }

        // åœæ­¢å£°éŸ³
        function stopVoice() {
            if (audio) {
                audio.pause();
                audio.currentTime = 0;
                
                const statusEl = document.getElementById('manual-status');
                statusEl.textContent = 'â¹ï¸ å£°éŸ³å·²åœæ­¢';
                statusEl.className = 'status';
            }
        }

        // å¾ªç¯æ’­æ”¾
        function playLoop() {
            if (!loopAudio) {
                loopAudio = new Audio('/sounds/voice1.MP3');
                loopAudio.volume = 0.6;
                loopAudio.loop = true;
            }
            
            const statusEl = document.getElementById('loop-status');
            
            loopAudio.currentTime = 0;
            loopAudio.play().then(() => {
                statusEl.textContent = 'ğŸ”„ æ­£åœ¨å¾ªç¯æ’­æ”¾';
                statusEl.className = 'status success';
            }).catch(error => {
                statusEl.textContent = 'âŒ å¾ªç¯æ’­æ”¾å¤±è´¥: ' + error.message;
                statusEl.className = 'status error';
            });
        }

        // åœæ­¢å¾ªç¯
        function stopLoop() {
            if (loopAudio) {
                loopAudio.pause();
                loopAudio.currentTime = 0;
                
                const statusEl = document.getElementById('loop-status');
                statusEl.textContent = 'â¹ï¸ å¾ªç¯æ’­æ”¾å·²åœæ­¢';
                statusEl.className = 'status';
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æµ‹éŸ³é¢‘æ–‡ä»¶
        window.addEventListener('load', checkAudioFile);
    </script>
</body>
</html>
